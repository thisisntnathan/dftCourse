I"6<p>The AS-CHEM cluster (like many other high-performance computing clusters) runs on a Linux-based operating system called CentOS so navigating its filesystem requires some knowledge of the Unix shell.  As this guide is written for those without much computer experience, the more experienced reader may feel free to skip this section.</p>

<h3 id="what-is-the-shell">What is the shell?</h3>

<p>The <em>shell</em> is a program that exposes a computer’s operating system to a user or another program.<sup>1</sup> It is not the same as the program with which will interact with it: the <em>terminal</em>; however, since the terminal is the main mode of communication with a shell, you commonly see these terms used interchangeably.</p>

<p>There are many different shells; the most common, and the one we will use here, is the bourne again shell or <kbd>bash</kbd>, but others, like <kbd>zsh</kbd>, <kbd>tcsh</kbd>, and <kbd>csh</kbd>, do and can also be used here with slight modifications.</p>

<blockquote>
  <p><kbd>bash</kbd> is the command-line <em>shell</em>, but it is also the name of the accompanying <em>scripting language</em>. So in this course we use the <kbd>bash</kbd> program to send commands to the operating system using the <kbd>bash</kbd> language.</p>
</blockquote>

<h2 id="navigating-the-filesystem">Navigating the filesystem</h2>

<p>When navigating a computer system via a <em>command-line</em> system you exist in a directory (imagine the little streetview guy wandering around a city, or, if you can remember it, <a href="https://www.pcjs.org/software/pcx86/game/infocom/zork1/">Zork</a>) and, unless otherwise specified, commands take action in and on the directory in which you are currently located a.k.a. the current working directory.</p>

<p>When you open terminal you should see something like:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user@computer | ~ <span class="nv">$ </span>
</code></pre></div></div>

<p>This is called the <em>terminal prompt</em> or the <em>command prompt</em>; it displays your username and the computer that you’re logged on to. The <code class="language-plaintext highlighter-rouge">~</code> is a shorthand for your home directory, but more on that in a bit. Commands are entered after the <code class="language-plaintext highlighter-rouge">$</code>.</p>

<p>To view the current working directory type <code class="language-plaintext highlighter-rouge">pwd</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NathanLui@local | ~ <span class="nv">$ </span><span class="nb">pwd</span>
/Users/NathanLui
</code></pre></div></div>

<h3 id="moving-around">Moving around</h3>

<p>To navigate between directories use the command <code class="language-plaintext highlighter-rouge">cd</code> followed by the path of the directory you want to enter.  For example, to navigate to the <code class="language-plaintext highlighter-rouge">Documents</code> folder use <code class="language-plaintext highlighter-rouge">cd Documents</code>.  Notice how the <code class="language-plaintext highlighter-rouge">~</code> changes to display the path to the new directory <code class="language-plaintext highlighter-rouge">~/Documents</code>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NathanLui@local | ~ <span class="nv">$ </span><span class="nb">pwd</span>
/Users/NathanLui
NathanLui@local | ~ <span class="nv">$ </span><span class="nb">cd </span>Documents
NathanLui@local | ~/Documents <span class="nv">$ </span><span class="nb">pwd</span>
/Users/NathanLui/Documents
</code></pre></div></div>

<p>The terminal will understand two types of paths: relative or absolute. A directory’s <strong>absolute</strong> path begins with <code class="language-plaintext highlighter-rouge">/</code> and describes <em>the exact location of the directory</em>. The command <code class="language-plaintext highlighter-rouge">pwd</code> returns a directory’s absolute path. A directory’s <strong>relative</strong> path describes the location of a directory <em>relative to the current working directory</em>.<br />
In the example above the absolute path of <code class="language-plaintext highlighter-rouge">Documents</code> is <code class="language-plaintext highlighter-rouge">/Users/NathanLui/Documents</code>, but relative to our home directory the relative path is just <code class="language-plaintext highlighter-rouge">Documents</code>.</p>

<h3 id="looking-around">Looking around</h3>

<p>Use the command <code class="language-plaintext highlighter-rouge">ls</code> to look inside the current working directory.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NathanLui@local | ~/Documents <span class="nv">$ </span><span class="nb">ls
</span>launchCodes.txt          playGame.sh          Presentation Slides
</code></pre></div></div>

<p>Of course this doesn’t tell us much about these files. So we use the flag <code class="language-plaintext highlighter-rouge">-l</code></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NathanLui@local | ~/Documents <span class="o">&gt;&gt;&gt;</span> <span class="nb">ls</span> <span class="nt">-l</span>
total 9688
<span class="nt">-rw-r--r--</span>@  1 NathanLui    45K Jul  6 15:19 launchCodes.txt
<span class="nt">-rwxr-xr-x</span>   1 NathanLui   192B Jun 29 11:25 playGame.sh
drwxr-xr-x   9 NathanLui   627B Jun  1  2021 Presentation Slides
</code></pre></div></div>

<p>This tells us more (sometimes more than we want to know) about our files and folders. On the far left of the output is the list of file’s permission, or <em>mode of access</em>. These modes control what the file is allowed to do and who is allowed to do them. There are 3 access levels for any file: the owner, the group, and everyone. The 10 spaces of the designate permissions <strong>r</strong>ead, <strong>w</strong>rite, and e<strong>x</strong>ecute (run) access for these three groups (plus a general descriptor at the beginning).</p>

<p>For example, the file <code class="language-plaintext highlighter-rouge">launchCodes.txt</code> has the access descriptor <code class="language-plaintext highlighter-rouge">-rw-r--r--</code> meaning it is a regular file <code class="language-plaintext highlighter-rouge">-</code> for which the user (u) can read and write but not execute <code class="language-plaintext highlighter-rouge">rw-</code>, my group (g) can only read <code class="language-plaintext highlighter-rouge">r--</code>, and others (o) else can only read <code class="language-plaintext highlighter-rouge">r--</code>. Whereas, the file <code class="language-plaintext highlighter-rouge">playGame.sh</code> is a program, or a shell script. A shell script is run (executed) by the user, so it needs the permission code <code class="language-plaintext highlighter-rouge">x</code> to to function properly. Notice above that <code class="language-plaintext highlighter-rouge">playGame.sh</code> can be executed by the user, group, and everyone else. Sometimes you’ll need to change permissions (usually, you need to give a file executable permission) and this can be done using the <code class="language-plaintext highlighter-rouge">chmod</code> command (<strong>ch</strong>ange <strong>mod</strong>e) followed by the new set of permissions. A more detailed explanation of file atributes and permissions can be found <a href="https://wiki.archlinux.org/title/File_permissions_and_attributes">here</a>.<sup>2</sup></p>

<h3 id="making-and-editing-files">Making and editing files</h3>

<p>To make or edit files in terminal you’ll use one of the preinstalled text editors: <kbd>vi</kbd>, <kbd>vim</kbd>, or <kbd>nano</kbd>.  My personal favorite is <kbd>vim</kbd>.  If you don’t have experience using a command line text editor it will take a bit of getting used to.  A cheat sheet for <kbd>vim</kbd> can be found <a href="https://www.radford.edu/~mhtay/CPSC120/VIM_Editor_Commands.htm">here</a>.<sup>3</sup> <kbd>nano</kbd> is the command-line text editor that generally is the easiest to pick up for first-time users. You can find the <a href="https://www.nano-editor.org/docs.php">full documentation</a><sup>4</sup> and <a href="www.nano-editor.org/dist/latest/cheatsheet.html">cheat sheet</a><sup>5</sup> on its website. If editing files in the terminal isn’t your style, you can always download your file of interest from the cluster and edit it locally and then upload it back when you’re done, but this will get tedious.</p>

<p>To edit or create a file simply type <code class="language-plaintext highlighter-rouge">vim /path/to/file</code>. If the file already exists <kbd>vim</kbd> will open it and you can edit to your heart’s content (of course, it should go without saying that text editors can only edit text based files). If the system can’t find the file <kbd>vim</kbd> will open a blank file with the path/name that you specified. <kbd>vim</kbd> will not save that file until you write it with <code class="language-plaintext highlighter-rouge">:w</code>.</p>

<h3 id="asking-for-help">Asking for help</h3>

<!-- <div class="message">
    Help will always be given in Linux to those who ask for it. <br>
    <right>
        -Harry Potter's IT teacher, probably...
    </right>
</div> -->

<blockquote>
  <p>Help will always be given in Linux to those who ask for it. <br />
<cite>—Harry Potter’s IT teacher, probably…</cite></p>
</blockquote>

<p>These are the essential, but very basic Unix commands to get you started. There can be quite the learning curve when transitioning from a graphical system to the command line so I’ll leave you with two of the most important commands to remember when you’re stuck: <code class="language-plaintext highlighter-rouge">man</code> and <code class="language-plaintext highlighter-rouge">apropos</code>.</p>

<p>Say you want to take a peek at the permissions of a certain file, but you can’t remember the flag for the detailed output.  The <code class="language-plaintext highlighter-rouge">man ls</code> command brings up the manual page for <code class="language-plaintext highlighter-rouge">ls</code>. In it you’ll find detailed documentation for the command including its signature, description, options, examples, and related commands. To exit the manual page press <code class="language-plaintext highlighter-rouge">q</code>. The Linux manual is also available <a href="https://linux.die.net/man/">online</a>.<sup>6</sup></p>

<p>Now, that’s nice if you know what command you need for, but say you want to make a new directory (folder) and you’re not sure how. This is where <code class="language-plaintext highlighter-rouge">apropos</code> comes in.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NathanLui@local | ~ <span class="nv">$ </span>apropos make directory
...
makewhatis<span class="o">(</span>8<span class="o">)</span>            - create whatis database
makewhatis.local<span class="o">(</span>8<span class="o">)</span>      - start makewhatis <span class="k">for </span><span class="nb">local </span>file systems
<span class="nb">mkdir</span><span class="o">(</span>1<span class="o">)</span>                 - make directories
<span class="nb">mkfifo</span><span class="o">(</span>1<span class="o">)</span>                - make fifos
mklocale<span class="o">(</span>1<span class="o">)</span>              - make LC_CTYPE locale files
...
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Apropos</code> searches the linux manual pages for the query and returns results sorted <em>alphabetically</em>.</p>

<h3 id="other-useful-commands">Other useful commands</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> &lt;/path/to/directory&gt;                      Make a new directory
<span class="nb">rmdir</span> &lt;/path/to/directory&gt;                      Remove a directory
<span class="nb">rm</span> &lt;/path/to/file&gt;                              Remove a file
<span class="nb">mv</span> &lt;/path/to/file&gt; &lt;/path/to/directory&gt;         Move file to new directory
<span class="nb">cp</span> &lt;/path/to/file&gt; &lt;/path/to/directory&gt;         Copy file to new directory
<span class="nb">cat</span> &lt;/path/to/file&gt;                             Display the contents of a file
bash &lt;/path/to/executable&gt;                      Run the executable
</code></pre></div></div>

<h3 id="lets-build-a-program">Let’s build a program</h3>

<p>Go to the next lesson to write your own script!</p>

<p><br /></p>

<table>
  <tbody>
    <tr>
      <td><center>Previous<br /><a href="/ShortCourse/software.html">Software</a></center></td>
      <td><center><a href="/introduction.html">Home</a></center></td>
      <td><center>Next<br /><a href="/ShortCourse/firstScript.html">My First Script</a></center></td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h4 id="references">References</h4>

<p>(1) <a href="https://en.wikipedia.org/wiki/Shell_(computing)">Shell (computing)</a><br />
(2) <a href="https://wiki.archlinux.org/title/File_permissions_and_attributes">File permissions</a><br />
(3) <a href="https://www.radford.edu/~mhtay/CPSC120/VIM_Editor_Commands.htm">https://www.radford.edu/~mhtay/CPSC120/VIM_Editor_Commands.htm</a><br />
(4) <a href="https://www.nano-editor.org/docs.php"><kbd>nano</kbd> documentation</a><br />
(5) <a href="www.nano-editor.org/dist/latest/cheatsheet.html"><kbd>nano</kbd> cheat sheet</a><br />
(6) <a href="https://linux.die.net/man/">The Linux Manual</a></p>
:ET